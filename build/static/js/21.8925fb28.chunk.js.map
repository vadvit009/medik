{"version":3,"sources":["pages/Auth/Auth.module.css","pages/Auth/Auth.js"],"names":["module","exports","connect","state","dispatch","login","data","isRemember","loginAction","showAlert","content","showAlertAction","hideAlert","hideAlertAction","location","h","useHistory","breadCrumbsItems","name","path","icon","faHome","console","log","initialValues","email","password","validate","values","errors","length","test","onSubmit","a","setSubmitting","userId","push","redirectTo","touched","handleChange","handleBlur","handleSubmit","setValues","SuccessIcon","faCheckCircle","className","s","success__icon","ErrorIcon","faExclamationCircle","error__icon","body","container","title__container","title","items","input__container","onChange","onBlur","value","type","placeholder","remember__container","checked","remember__checkbox","onClick","remember__desc","to","restore","submit_button","fbt","reg","goBack","faArrowLeft","logwith","faGoogle","logicon","gl","faFacebook","fb"],"mappings":"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","file":"static/js/21.8925fb28.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Auth_body__2G_36\",\"container\":\"Auth_container__38MaD\",\"title__container\":\"Auth_title__container__3I0PX\",\"title\":\"Auth_title__ahNSX\",\"login\":\"Auth_login__1cL42\",\"input__container\":\"Auth_input__container__K24G3\",\"password\":\"Auth_password__3BfEs\",\"fbt\":\"Auth_fbt__sxCqU\",\"logwith\":\"Auth_logwith__1rhjU\",\"logicon\":\"Auth_logicon__3iEmz\",\"gl\":\"Auth_gl__2LwUK\",\"fb\":\"Auth_fb__2vpKw\",\"fakey\":\"Auth_fakey__15jbk\",\"error__icon\":\"Auth_error__icon__1xHHe\",\"success__icon\":\"Auth_success__icon__XaeFf\",\"restore\":\"Auth_restore__2ihi1\",\"reg\":\"Auth_reg__2vdud\",\"goback\":\"Auth_goback__1gHLP\",\"goBack\":\"Auth_goBack__1FVA6\",\"submit_button\":\"Auth_submit_button__1Icqq\",\"icon\":\"Auth_icon__1a6ap\",\"remember__container\":\"Auth_remember__container__25UJT\",\"remember__desc\":\"Auth_remember__desc__1_bki\"};","import React, { useState } from \"react\";\nimport s from \"./Auth.module.css\";\nimport Input from \"../../misc/Inputs/Input/Input\";\nimport { Formik, ErrorMessage } from \"formik\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGoogle, faFacebook } from \"@fortawesome/free-brands-svg-icons\";\nimport BreadCrumbs from \"../../misc/BreadCrumbs/BreadCrumbs\";\nimport {\n  faCheckCircle,\n  faExclamationCircle,\n  faKey,\n  faArrowLeft,\n  faHome,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"../../misc/Button/Button\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport _axios from \"../../store/api/_axios\";\nimport { loginAction } from \"../../store/actions/profileActions\";\nimport { connect } from \"react-redux\";\nimport {\n  showAlertAction,\n  hideAlertAction,\n} from \"../../store/actions/alertActions\";\n\nconst Auth = ({ login, hideAlert, showAlert, location }) => {\n  const h = useHistory();\n  const breadCrumbsItems = [\n    {\n      name: \"Головна\",\n      path: \"/\",\n      icon: <FontAwesomeIcon icon={faHome} />,\n    },\n    { name: \"Увійти\", path: \"/login\" },\n  ];\n\n  console.log(\"location ===\", location?.state);\n\n  return (\n    <div>\n      <Formik\n        initialValues={{ email: \"\", password: \"\", isRemember: false }}\n        validate={(values) => {\n          const errors = {};\n          console.log(\"is remember ===\", values.isRemember);\n\n          if (values.password.length <= 5) {\n            errors.password = \"Занадто короткий пароль\";\n          }\n          if (!values.email) {\n            errors.email = \"Введіть електронну пошту\";\n          } else if (\n            !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n          ) {\n            errors.email = \"Невірно введена електронна пошта\";\n          }\n          return errors;\n        }}\n        onSubmit={async (values, { setSubmitting }) => {\n          const { email, password } = values;\n          const userId = await login({ email, password }, values.isRemember);\n          console.log(\"userId ===\", userId);\n\n          if (userId === \"admin\") {\n            h.push(\"/admin\");\n          } else if (userId) {\n            if (location?.state?.redirectTo) {\n              h.push(location.state.redirectTo);\n            } else {\n              h.push(`/profile/${userId}`);\n            }\n          } else {\n            showAlert(\"Помилка при авторизації. Невірно введені дані.\");\n          }\n        }}\n      >\n        {({\n          values,\n          errors,\n          touched,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          setValues,\n        }) => {\n          const SuccessIcon = () => (\n            <FontAwesomeIcon\n              icon={faCheckCircle}\n              className={`${s.icon} ${s.success__icon}`}\n            />\n          );\n          const ErrorIcon = () => (\n            <FontAwesomeIcon\n              icon={faExclamationCircle}\n              className={`${s.icon} ${s.error__icon}`}\n            />\n          );\n          return (\n            <form>\n              <div className={s.body}>\n                <div className={s.container}>\n                  <div className={s.title__container}>\n                    <h4 className={s.title}>Увійти</h4>\n                    <BreadCrumbs items={breadCrumbsItems} />\n                  </div>\n                  <div className={s.login}>\n                    <div className={s.input__container}>\n                      <div className={s.email}>\n                        <Input\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          // Icon={!errors.email ? SuccessIcon : ErrorIcon}\n                          name=\"email\"\n                          value={values.email}\n                          type=\"email\"\n                          placeholder=\"example@gmail.com\"\n                        >\n                          {!errors.email && touched.email && !!values.email && (\n                            <SuccessIcon />\n                          )}\n\n                          {(errors.email || !values.email) && touched.email && (\n                            <ErrorIcon />\n                          )}\n                        </Input>\n                        <div className={s.password}>\n                          <Input\n                            onChange={handleChange}\n                            onBlur={handleBlur}\n                            type=\"password\"\n                            // Icon={!errors.password ? SuccessIcon : ErrorIcon}\n                            name=\"password\"\n                            value={values.password}\n                            placeholder=\"••••••••\"\n                          >\n                            {(errors.email || !values.email) &&\n                              touched.email && <ErrorIcon />}\n                          </Input>\n                        </div>\n                        <div className={s.remember__container}>\n                          <input\n                            type=\"checkbox\"\n                            checked={values.isRemember}\n                            className={s.remember__checkbox}\n                            name=\"isRemember\"\n                            onChange={handleChange}\n                          />\n                          <p\n                            onClick={() =>\n                              setValues({\n                                ...values,\n                                isRemember: !values.isRemember,\n                              })\n                            }\n                            className={s.remember__desc}\n                          >\n                            Запам'ятати мене\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    <Link to=\"/restore\">\n                      <button className={s.restore} type=\"button\">\n                        Відновити акаунт\n                      </button>\n                    </Link>\n                    <div className={s.submit_button}>\n                      <Button\n                        type=\"submit\"\n                        onClick={handleSubmit}\n                        title=\"Підтвердити\"\n                      />\n                    </div>\n                    <div className={s.fbt}>\n                      <Link to=\"/register\">\n                        <button className={s.reg}>\n                          Зареєструватись\n                          {/* <FontAwesomeIcon icon={faKey} className={s.faKey} /> */}\n                        </button>\n                      </Link>\n                      <button\n                        className={s.reg}\n                        onClick={() => {\n                          h.goBack();\n                        }}\n                      >\n                        <FontAwesomeIcon\n                          icon={faArrowLeft}\n                          className={s.goBack}\n                        />\n                        Продовжити покупки\n                      </button>\n                    </div>\n                    <div className={s.logwith}>\n                      <FontAwesomeIcon\n                        icon={faGoogle}\n                        className={`${s.logicon} ${s.gl}`}\n                      />\n                      <FontAwesomeIcon\n                        icon={faFacebook}\n                        className={`${s.logicon} ${s.fb} `}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </form>\n          );\n        }}\n      </Formik>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    login: (data, isRemember) => dispatch(loginAction(data, isRemember)),\n    showAlert: (content) => dispatch(showAlertAction(content)),\n    hideAlert: () => dispatch(hideAlertAction()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth);\n"],"sourceRoot":""}