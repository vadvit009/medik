{"version":3,"sources":["pages/Auth/Auth.module.css","pages/Auth/Auth.js"],"names":["module","exports","connect","state","dispatch","login","data","loginAction","showAlert","content","showAlertAction","hideAlert","hideAlertAction","location","h","useHistory","breadCrumbsItems","name","path","icon","faHome","console","log","initialValues","email","password","validate","values","errors","length","test","onSubmit","a","setSubmitting","loginResponse","_id","user","token","document","cookie","redirectTo","push","touched","handleChange","handleBlur","handleSubmit","SuccessIcon","isSubmiting","faCheckCircle","className","s","success__icon","ErrorIcon","faExclamationCircle","error__icon","body","container","title__container","title","items","input__container","onChange","onBlur","value","type","placeholder","to","restore","submit_button","fbt","reg","onClick","goBack","faArrowLeft","logwith","faGoogle","logicon","gl","faFacebook","fb"],"mappings":"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","file":"static/js/19.8445b8a9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Auth_body__2G_36\",\"container\":\"Auth_container__38MaD\",\"title__container\":\"Auth_title__container__3I0PX\",\"title\":\"Auth_title__ahNSX\",\"login\":\"Auth_login__1cL42\",\"input__container\":\"Auth_input__container__K24G3\",\"password\":\"Auth_password__3BfEs\",\"fbt\":\"Auth_fbt__sxCqU\",\"logwith\":\"Auth_logwith__1rhjU\",\"logicon\":\"Auth_logicon__3iEmz\",\"gl\":\"Auth_gl__2LwUK\",\"fb\":\"Auth_fb__2vpKw\",\"fakey\":\"Auth_fakey__15jbk\",\"error__icon\":\"Auth_error__icon__1xHHe\",\"success__icon\":\"Auth_success__icon__XaeFf\",\"restore\":\"Auth_restore__2ihi1\",\"reg\":\"Auth_reg__2vdud\",\"goback\":\"Auth_goback__1gHLP\",\"goBack\":\"Auth_goBack__1FVA6\",\"submit_button\":\"Auth_submit_button__1Icqq\",\"icon\":\"Auth_icon__1a6ap\"};","import React, { useState } from \"react\";\nimport s from \"./Auth.module.css\";\nimport Input from \"../../misc/Inputs/Input/Input\";\nimport { Formik, ErrorMessage } from \"formik\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGoogle, faFacebook } from \"@fortawesome/free-brands-svg-icons\";\nimport BreadCrumbs from \"../../misc/BreadCrumbs/BreadCrumbs\";\nimport {\n  faCheckCircle,\n  faExclamationCircle,\n  faKey,\n  faArrowLeft,\n  faHome,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"../../misc/Button/Button\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport _axios from \"../../store/api/_axios\";\nimport { loginAction } from \"../../store/actions/profileActions\";\nimport { connect } from \"react-redux\";\nimport {\n  showAlertAction,\n  hideAlertAction,\n} from \"../../store/actions/alertActions\";\n\nconst Auth = ({ login, hideAlert, showAlert, location }) => {\n  const h = useHistory();\n  const breadCrumbsItems = [\n    {\n      name: \"Головна\",\n      path: \"/\",\n      icon: <FontAwesomeIcon icon={faHome} />,\n    },\n    { name: \"Увійти\", path: \"/login\" },\n  ];\n\n  console.log(\"location ===\", location?.state);\n\n  return (\n    <div>\n      <Formik\n        initialValues={{ email: \"\", password: \"\" }}\n        validate={(values) => {\n          const errors = {};\n          if (values.password.length <= 5) {\n            errors.password = \"Занадто короткий пароль\";\n          }\n          if (!values.email) {\n            errors.email = \"Введіть електронну пошту\";\n          } else if (\n            !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n          ) {\n            errors.email = \"Невірно введена електронна пошта\";\n          }\n          return errors;\n        }}\n        onSubmit={async (values, { setSubmitting }) => {\n          const { email, password } = values;\n          const loginResponse = await login({ email, password });\n          console.log(\"login response ===\", loginResponse);\n\n          if (loginResponse) {\n            const { _id } = loginResponse.user;\n            const { token } = loginResponse;\n            if (token) {\n              document.cookie = `token=${token}`;\n            }\n            if (location?.state?.redirectTo) {\n              h.push(location.state.redirectTo);\n            } else {\n              h.push(`/profile/${_id}`);\n            }\n          } else {\n            showAlert(\"Помилка при авторизації. Невірно введені дані.\");\n          }\n        }}\n      >\n        {({\n          values,\n          errors,\n          touched,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          isSubmiting,\n        }) => {\n          const SuccessIcon = () => (\n            <FontAwesomeIcon\n              icon={faCheckCircle}\n              className={`${s.icon} ${s.success__icon}`}\n            />\n          );\n          const ErrorIcon = () => (\n            <FontAwesomeIcon\n              icon={faExclamationCircle}\n              className={`${s.icon} ${s.error__icon}`}\n            />\n          );\n          return (\n            <form onSubmit={handleSubmit}>\n              <div className={s.body}>\n                <div className={s.container}>\n                  <div className={s.title__container}>\n                    <h4 className={s.title}>Увійти</h4>\n                    <BreadCrumbs items={breadCrumbsItems} />\n                  </div>\n                  <div className={s.login}>\n                    <div className={s.input__container}>\n                      <div className={s.email}>\n                        <Input\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          // Icon={!errors.email ? SuccessIcon : ErrorIcon}\n                          name=\"email\"\n                          value={values.email}\n                          type=\"email\"\n                          placeholder=\"example@gmail.com\"\n                        >\n                          {!errors.email && touched.email && !!values.email && (\n                            <SuccessIcon />\n                          )}\n\n                          {(errors.email || !values.email) && touched.email && (\n                            <ErrorIcon />\n                          )}\n                        </Input>\n                        <div className={s.password}>\n                          <Input\n                            onChange={handleChange}\n                            onBlur={handleBlur}\n                            type=\"password\"\n                            // Icon={!errors.password ? SuccessIcon : ErrorIcon}\n                            name=\"password\"\n                            value={values.password}\n                            placeholder=\"••••••••\"\n                          >\n                            {(errors.email || !values.email) &&\n                              touched.email && <ErrorIcon />}\n                          </Input>\n                        </div>\n                      </div>\n                    </div>\n                    <Link to=\"/restore\">\n                      <button className={s.restore}>Відновити акаунт</button>\n                    </Link>\n                    <div className={s.submit_button}>\n                      <Button title=\"Підтвердити\" />\n                    </div>\n\n                    <div className={s.fbt}>\n                      <Link to=\"/register\">\n                        <button className={s.reg}>\n                          Зареєструватись\n                          {/* <FontAwesomeIcon icon={faKey} className={s.faKey} /> */}\n                        </button>\n                      </Link>\n                      <button\n                        className={s.reg}\n                        onClick={() => {\n                          h.goBack();\n                        }}\n                      >\n                        <FontAwesomeIcon\n                          icon={faArrowLeft}\n                          className={s.goBack}\n                        />\n                        Продовжити покупки\n                      </button>\n                    </div>\n                    <div className={s.logwith}>\n                      <FontAwesomeIcon\n                        icon={faGoogle}\n                        className={`${s.logicon} ${s.gl}`}\n                      />\n                      <FontAwesomeIcon\n                        icon={faFacebook}\n                        className={`${s.logicon} ${s.fb} `}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </form>\n          );\n        }}\n      </Formik>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    login: (data) => dispatch(loginAction(data)),\n    showAlert: (content) => dispatch(showAlertAction(content)),\n    hideAlert: () => dispatch(hideAlertAction()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth);\n"],"sourceRoot":""}