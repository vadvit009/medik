{"version":3,"sources":["store/actions/adminActions.js","pages/Admin/pages/CreateNews/CreateNews.module.css","pages/Admin/pages/CreateNews/CreateNews.js"],"names":["createCategoryAction","category","dispatch","a","token","getAdminToken","console","log","desc","gallery","postCategory","response","status","type","ADD_CATEGORY","createNewsAction","news","postNews","data","createVendorAction","vendor","postVendor","getAttributesAction","fetchAttributes","SET_ATTRIBUTES","attributes","deleteAttributeAction","id","deleteAttribute","DELETE_ATTRIBUTE","getUsersAction","fetchUsers","SET_USERS","users","getVendorsAction","fetchVendors","filterUsersAction","searchValue","RESET_FILTERED_USERS","filteredUsers","filter","fName","lName","phone","toLowerCase","startsWith","SET_FILTERED_USERS","module","exports","connect","state","createNews","uploadInputRef","useRef","className","s","container","title__container","title","initialValues","onSubmit","values","formData","FormData","Object","entries","forEach","key","value","append","handleChange","setValues","handleSubmit","body","label","name","onChange","containerClass","input__container","images__container","image__container","icon","faTimes","delete__icon","onClick","current","image","src","alt","ref","e","files","target","reader","FileReader","onload","result","readAsDataURL","handleImages","isTextarea","submit__container","size"],"mappings":"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","file":"static/js/16.d9a5216c.chunk.js","sourcesContent":["import {\n  postCategory,\n  fetchUsers,\n  postNews,\n  postVendor,\n  fetchVendors,\n  fetchAttributes,\n  deleteAttribute,\n} from \"../api/api\";\nimport { getToken, getAdminToken } from \"../../utils/utils\";\nimport {\n  SET_USERS,\n  RESET_FILTERED_USERS,\n  SET_FILTERED_USERS,\n  ADD_CATEGORY,\n  SET_ATTRIBUTES,\n  DELETE_ATTRIBUTE,\n} from \"./actionTypes\";\n\nexport const createCategoryAction = (category) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    console.log(\"token ===\", token);\n    console.log(\"category ===\", { ...category, desc: \"\", gallery: [\"\"] });\n\n    const response = await postCategory(\n      { ...category, desc: \"\", gallery: [\"\"] },\n      token\n    );\n    if (response.status === 200) {\n      dispatch({ type: ADD_CATEGORY, category });\n    }\n    console.log(\"category response ===\", response.status);\n  };\n};\n\nexport const createNewsAction = (news) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await postNews(news, token);\n    console.log(\"news response ===\", response.data);\n  };\n};\n\nexport const createVendorAction = (vendor) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = postVendor(vendor, token);\n  };\n};\n\nexport const getAttributesAction = () => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await fetchAttributes(token);\n    if (response?.data) {\n      dispatch({\n        type: SET_ATTRIBUTES,\n        attributes: response.data,\n      });\n    }\n    console.log(\"attributes ===\", response?.data);\n  };\n};\n\nexport const deleteAttributeAction = (id) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await deleteAttribute(id, token);\n    console.log(\"delete attribute ===\", response?.data);\n    if (response.status === 200) {\n      dispatch({\n        type: DELETE_ATTRIBUTE,\n        id,\n      });\n    }\n  };\n};\n\nexport const getUsersAction = () => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await fetchUsers(token);\n    if (response.data) {\n      dispatch({\n        type: SET_USERS,\n        users: response.data,\n      });\n    }\n  };\n};\n\nexport const getVendorsAction = () => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await fetchVendors(token);\n    console.log(\"response ===\", response?.data);\n  };\n};\n\nexport const filterUsersAction = (searchValue, users) => {\n  if (!searchValue) {\n    return {\n      type: RESET_FILTERED_USERS,\n    };\n  }\n  const filteredUsers = users.filter(\n    ({ fName = \"\", lName = \"\", phone = \"\" }) => {\n      return (\n        fName.toLowerCase().startsWith(searchValue) ||\n        lName.toLowerCase().startsWith(searchValue) ||\n        `${phone}`.toLowerCase().startsWith(searchValue)\n      );\n    }\n  );\n  return {\n    type: SET_FILTERED_USERS,\n    users: filteredUsers,\n  };\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CreateNews_container__2bqbt\",\"body\":\"CreateNews_body__2-56y\",\"input__container\":\"CreateNews_input__container__RZXwo\",\"title__container\":\"CreateNews_title__container__11Ay8\",\"title\":\"CreateNews_title__Mh7mf\",\"images__container\":\"CreateNews_images__container__1PeJe\",\"image__container\":\"CreateNews_image__container__14BJ-\",\"image\":\"CreateNews_image__3Up9L\",\"delete__icon\":\"CreateNews_delete__icon__2PHzh\",\"label\":\"CreateNews_label__2HBAh\",\"submit__container\":\"CreateNews_submit__container__3kabs\"};","import React, { useRef } from \"react\";\nimport s from \"./CreateNews.module.css\";\nimport { connect } from \"react-redux\";\nimport Input from \"../../../../misc/Inputs/Input/Input\";\nimport Button from \"../../../../misc/Button/Button\";\nimport FixedWrapper from \"../../../../wrappers/FixedWrapper/FixedWrapper\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { Formik } from \"formik\";\nimport { createNewsAction } from \"../../../../store/actions/adminActions\";\n\nconst CreateNews = ({ createNews }) => {\n  const uploadInputRef = useRef();\n  const handleImages = ({ target: { files } }, values, setValues) => {\n    const reader = new FileReader();\n\n    reader.onload = ({ target: { result } }) => {\n      setValues({ ...values, gallery: result });\n    };\n    reader.readAsDataURL(files[0]);\n  };\n\n  return (\n    <div>\n      <div className={s.container}>\n        <div className={s.title__container}>\n          <h1 className={s.title}>Створення новини</h1>\n        </div>\n        <FixedWrapper>\n          <Formik\n            initialValues={{ title: \"\", desc: \"\", gallery: \"\" }}\n            onSubmit={(values) => {\n              const formData = new FormData();\n              Object.entries(values).forEach(([key, value]) => {\n                formData.append(key, value);\n              });\n              createNews(formData);\n            }}\n          >\n            {({ values, handleChange, setValues, handleSubmit }) => (\n              <form className={s.body}>\n                <Input\n                  label=\"Назва\"\n                  value={values.title}\n                  name=\"title\"\n                  onChange={handleChange}\n                  containerClass={s.input__container}\n                />\n                <div className={s.input__container}>\n                  <p className={s.label}>Фото</p>\n                  <div className={s.images__container}>\n                    {values.gallery && (\n                      <div className={s.image__container}>\n                        <FontAwesomeIcon\n                          icon={faTimes}\n                          className={s.delete__icon}\n                          onClick={() => {\n                            uploadInputRef.current.value = null;\n                            setValues({ ...values, gallery: \"\" });\n                          }}\n                        />\n                        <img\n                          className={s.image}\n                          src={values.gallery}\n                          alt=\"loading\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                  <input\n                    type=\"file\"\n                    ref={uploadInputRef}\n                    onChange={(e) => handleImages(e, values, setValues)}\n                  />\n                </div>\n                <Input\n                  label=\"Опис\"\n                  value={values.desc}\n                  name=\"desc\"\n                  onChange={handleChange}\n                  containerClass={s.input__container}\n                  isTextarea\n                />\n                <div className={s.submit__container}>\n                  <Button\n                    onClick={handleSubmit}\n                    type=\"submit\"\n                    title=\"Створити\"\n                    size=\"lg\"\n                  />\n                </div>\n              </form>\n            )}\n          </Formik>\n        </FixedWrapper>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {};\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    createNews: (news) => dispatch(createNewsAction(news)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNews);\n"],"sourceRoot":""}