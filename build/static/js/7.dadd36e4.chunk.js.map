{"version":3,"sources":["pages/Auth/Auth.module.css","store/actions/profileActions.js","pages/Auth/Auth.js"],"names":["module","exports","registerAction","data","dispatch","a","registerRequest","response","console","log","loginAction","loginRequest","type","SET_USER_DATA","user","connect","state","login","showAlert","content","showAlertAction","hideAlert","hideAlertAction","h","useHistory","breadCrumbsItems","name","path","icon","faHome","initialValues","email","password","validate","values","errors","length","test","onSubmit","setSubmitting","loginResponse","push","_id","setTimeout","touched","handleChange","handleBlur","handleSubmit","SuccessIcon","isSubmiting","faCheckCircle","className","s","success__icon","ErrorIcon","faExclamationCircle","error__icon","body","container","title__container","title","items","input__container","onChange","onBlur","value","placeholder","to","restore","submit_button","fbt","reg","onClick","goBack","faArrowLeft","logwith","faGoogle","logicon","gl","faFacebook","fb"],"mappings":"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","file":"static/js/7.dadd36e4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Auth_body__1frQH\",\"container\":\"Auth_container__2uWlK\",\"title__container\":\"Auth_title__container__1Tc5S\",\"title\":\"Auth_title__3nc6B\",\"login\":\"Auth_login__1cBdi\",\"input__container\":\"Auth_input__container__1w13s\",\"password\":\"Auth_password__3JPZo\",\"fbt\":\"Auth_fbt__YDfj0\",\"logwith\":\"Auth_logwith__dOBJB\",\"logicon\":\"Auth_logicon__15E0y\",\"gl\":\"Auth_gl__Q2DNl\",\"fb\":\"Auth_fb__2Gt80\",\"fakey\":\"Auth_fakey__1oDmY\",\"error__icon\":\"Auth_error__icon__21epr\",\"success__icon\":\"Auth_success__icon__2TTVh\",\"restore\":\"Auth_restore__R9sFO\",\"reg\":\"Auth_reg__2DuLm\",\"goback\":\"Auth_goback__25WBt\",\"goBack\":\"Auth_goBack__j3uFQ\",\"submit_button\":\"Auth_submit_button__3nCxI\",\"icon\":\"Auth_icon__1rgAj\"};","import { registerRequest, loginRequest } from \"../api/api\";\r\nimport { SET_USER_DATA } from \"./actionTypes\";\r\n\r\nexport const registerAction = (data) => {\r\n  return async (dispatch) => {\r\n    const response = await registerRequest(data);\r\n    console.log(\"register response ===\", response.data);\r\n  };\r\n};\r\n\r\nexport const loginAction = (data) => {\r\n  return async (dispatch) => {\r\n    const response = await loginRequest(data);\r\n    // console.log(\"login response ===\", response.data);\r\n    if (response) {\r\n      dispatch({ type: SET_USER_DATA, user: response.data });\r\n    }\r\n    return response?.data;\r\n  };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport s from \"./Auth.module.css\";\r\nimport Input from \"../../misc/Inputs/Input/Input\";\r\nimport { Formik, ErrorMessage } from \"formik\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faGoogle, faFacebook } from \"@fortawesome/free-brands-svg-icons\";\r\nimport BreadCrumbs from \"../../misc/BreadCrumbs/BreadCrumbs\";\r\nimport {\r\n  faCheckCircle,\r\n  faExclamationCircle,\r\n  faKey,\r\n  faArrowLeft,\r\n  faHome,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Button from \"../../misc/Button/Button\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport _axios from \"../../store/api/_axios\";\r\nimport { loginAction } from \"../../store/actions/profileActions\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  showAlertAction,\r\n  hideAlertAction,\r\n} from \"../../store/actions/alertActions\";\r\n\r\nconst Auth = ({ login, hideAlert, showAlert }) => {\r\n  const h = useHistory();\r\n  const breadCrumbsItems = [\r\n    {\r\n      name: \"Головна\",\r\n      path: \"/\",\r\n      icon: <FontAwesomeIcon icon={faHome} />,\r\n    },\r\n    { name: \"Увійти\", path: \"/login\" },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{ email: \"\", password: \"\" }}\r\n        validate={(values) => {\r\n          const errors = {};\r\n          if (values.password.length <= 5) {\r\n            errors.password = \"Занадто короткий пароль\";\r\n          }\r\n          if (!values.email) {\r\n            errors.email = \"Введіть електронну пошту\";\r\n          } else if (\r\n            !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\r\n          ) {\r\n            errors.email = \"Невірно введена електронна пошта\";\r\n          }\r\n          return errors;\r\n        }}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          const { email, password } = values;\r\n          const loginResponse = await login({ email, password });\r\n          console.log(\"login response ===\", loginResponse);\r\n\r\n          if (loginResponse) {\r\n            h.push(`/profile/${loginResponse._id}`);\r\n          } else {\r\n            showAlert(\"Помилка при авторизації. Невірно введені дані.\");\r\n            setTimeout(() => {\r\n              hideAlert();\r\n            }, 5000);\r\n          }\r\n\r\n          // _axios\r\n          //   .post(\"/login\", {\r\n          //     email,\r\n          //     password,\r\n          //   })\r\n\r\n          //   .then((res) => {\r\n          //     console.log(res);\r\n          //     if (res.status === 200) {\r\n          //       h.push(`/login/${res.data.user.userId}`);\r\n          //     }\r\n          //   })\r\n          //   .catch(console.log);\r\n        }}\r\n      >\r\n        {({\r\n          values,\r\n          errors,\r\n          touched,\r\n          handleChange,\r\n          handleBlur,\r\n          handleSubmit,\r\n          isSubmiting,\r\n        }) => {\r\n          const SuccessIcon = () => (\r\n            <FontAwesomeIcon\r\n              icon={faCheckCircle}\r\n              className={`${s.icon} ${s.success__icon}`}\r\n            />\r\n          );\r\n          const ErrorIcon = () => (\r\n            <FontAwesomeIcon\r\n              icon={faExclamationCircle}\r\n              className={`${s.icon} ${s.error__icon}`}\r\n            />\r\n          );\r\n          return (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className={s.body}>\r\n                <div className={s.container}>\r\n                  <div className={s.title__container}>\r\n                    <h4 className={s.title}>Увійти</h4>\r\n                    <BreadCrumbs items={breadCrumbsItems} />\r\n                  </div>\r\n                  <div className={s.login}>\r\n                    <div className={s.input__container}>\r\n                      <div className={s.email}>\r\n                        <Input\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          // Icon={!errors.email ? SuccessIcon : ErrorIcon}\r\n                          name=\"email\"\r\n                          value={values.email}\r\n                          type=\"email\"\r\n                          placeholder=\"example@gmail.com\"\r\n                        >\r\n                          {!errors.email && touched.email && !!values.email && (\r\n                            <SuccessIcon />\r\n                          )}\r\n\r\n                          {(errors.email || !values.email) && touched.email && (\r\n                            <ErrorIcon />\r\n                          )}\r\n                        </Input>\r\n                        <div className={s.password}>\r\n                          <Input\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}\r\n                            type=\"password\"\r\n                            // Icon={!errors.password ? SuccessIcon : ErrorIcon}\r\n                            name=\"password\"\r\n                            value={values.password}\r\n                            placeholder=\"••••••••\"\r\n                          >\r\n                            {(errors.email || !values.email) &&\r\n                              touched.email && <ErrorIcon />}\r\n                          </Input>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <Link to=\"/restore\">\r\n                      <button className={s.restore}>Відновити акаунт</button>\r\n                    </Link>\r\n                    <div className={s.submit_button}>\r\n                      <Button title=\"Підтвердити\" />\r\n                    </div>\r\n\r\n                    <div className={s.fbt}>\r\n                      <Link to=\"/register\">\r\n                        <button className={s.reg}>\r\n                          Зареєструватись\r\n                          {/* <FontAwesomeIcon icon={faKey} className={s.faKey} /> */}\r\n                        </button>\r\n                      </Link>\r\n                      <button\r\n                        className={s.reg}\r\n                        onClick={() => {\r\n                          h.goBack();\r\n                        }}\r\n                      >\r\n                        <FontAwesomeIcon\r\n                          icon={faArrowLeft}\r\n                          className={s.goBack}\r\n                        />\r\n                        Продовжити покупки\r\n                      </button>\r\n                    </div>\r\n                    <div className={s.logwith}>\r\n                      <FontAwesomeIcon\r\n                        icon={faGoogle}\r\n                        className={`${s.logicon} ${s.gl}`}\r\n                      />\r\n                      <FontAwesomeIcon\r\n                        icon={faFacebook}\r\n                        className={`${s.logicon} ${s.fb} `}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          );\r\n        }}\r\n      </Formik>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    login: (data) => dispatch(loginAction(data)),\r\n    showAlert: (content) => dispatch(showAlertAction(content)),\r\n    hideAlert: () => dispatch(hideAlertAction()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth);\r\n"],"sourceRoot":""}