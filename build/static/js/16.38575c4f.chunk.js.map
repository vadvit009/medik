{"version":3,"sources":["store/actions/adminActions.js","pages/Admin/pages/CreateNews/CreateNews.module.css","pages/Admin/pages/CreateNews/CreateNews.js"],"names":["createCategoryAction","category","dispatch","a","token","getAdminToken","console","log","desc","gallery","postCategory","response","status","type","ADD_CATEGORY","data","deleteCategoryAction","id","deleteCategory","DELETE_CATEGORY","createNewsAction","body","createNews","uploadImageToNews","deleteNewsAction","deleteNews","DELETE_NEWS","createVendorAction","vendor","postVendor","getAttributesAction","fetchAttributes","SET_ATTRIBUTES","attributes","deleteAttributeAction","deleteAttribute","DELETE_ATTRIBUTE","createAttributeAction","attribute","createAttribute","ADD_ATTRIBUTE","editAttributeAction","patchAttribute","getUsersAction","fetchUsers","SET_USERS","users","getVendorsAction","fetchVendors","filterUsersAction","searchValue","RESET_FILTERED_USERS","filteredUsers","filter","fName","lName","phone","toLowerCase","startsWith","SET_FILTERED_USERS","module","exports","connect","state","news","uploadInputRef","useRef","className","s","container","title__container","title","initialValues","galleryFile","onSubmit","resetForm","imageFormData","FormData","append","get","isNewsCreated","values","handleChange","setValues","handleSubmit","label","value","name","onChange","containerClass","input__container","images__container","image__container","icon","faTimes","delete__icon","onClick","current","image","src","alt","ref","e","files","target","reader","FileReader","onload","result","readAsDataURL","handleImages","isTextarea","submit__container","size"],"mappings":"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","file":"static/js/16.38575c4f.chunk.js","sourcesContent":["import {\n  postCategory,\n  fetchUsers,\n  postVendor,\n  fetchVendors,\n  fetchAttributes,\n  deleteAttribute,\n  deleteCategory,\n  createAttribute,\n  patchAttribute,\n  createNews,\n  uploadImageToNews,\n  deleteNews,\n} from \"../api/api\";\nimport { getToken, getAdminToken } from \"../../utils/utils\";\nimport {\n  SET_USERS,\n  RESET_FILTERED_USERS,\n  SET_FILTERED_USERS,\n  ADD_CATEGORY,\n  SET_ATTRIBUTES,\n  DELETE_ATTRIBUTE,\n  DELETE_CATEGORY,\n  ADD_ATTRIBUTE,\n  DELETE_NEWS,\n} from \"./actionTypes\";\n\nexport const createCategoryAction = (category) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    console.log(\"token ===\", token);\n    console.log(\"category ===\", { ...category, desc: \"\", gallery: [\"\"] });\n\n    const response = await postCategory(\n      { ...category, desc: \"\", gallery: [\"\"] },\n      token\n    );\n    if (response?.status) {\n      dispatch({ type: ADD_CATEGORY, category: response.data });\n    }\n    console.log(\"category response ===\", response.status);\n  };\n};\n\nexport const deleteCategoryAction = (id) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await deleteCategory(id, token);\n    if (response.status === 200) {\n      dispatch({ type: DELETE_CATEGORY, id });\n    }\n    console.log(\"delete category ===\", response?.data);\n  };\n};\n\nexport const createNewsAction = (body, gallery) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await createNews(body, token);\n    console.log(\"news response ===\", response.data);\n    if (!gallery || !response?.data) {\n      return false;\n    }\n    if (response?.data) {\n      console.log(\"gallery ===\", gallery);\n\n      const imageResponse = await uploadImageToNews(\n        gallery,\n        response.data,\n        token\n      );\n\n      return true;\n    }\n  };\n};\nexport const deleteNewsAction = (id) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await deleteNews(id, token);\n    console.log(\"delete news ===\", response?.data);\n    if (response.status === 200) {\n      dispatch({\n        type: DELETE_NEWS,\n        id,\n      });\n    }\n  };\n};\n\nexport const createVendorAction = (vendor) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = postVendor(vendor, token);\n  };\n};\n\nexport const getAttributesAction = () => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await fetchAttributes(token);\n    if (response?.data) {\n      dispatch({\n        type: SET_ATTRIBUTES,\n        attributes: response.data,\n      });\n    }\n    console.log(\"attributes ===\", response?.data);\n  };\n};\n\nexport const deleteAttributeAction = (id) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await deleteAttribute(id, token);\n    console.log(\"delete attribute ===\", response?.data);\n    if (response.status === 200) {\n      dispatch({\n        type: DELETE_ATTRIBUTE,\n        id,\n      });\n    }\n  };\n};\n\nexport const createAttributeAction = (attribute) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await createAttribute(attribute, token);\n    console.log(\"create response ===\", response?.data);\n    if (response?.data) {\n      dispatch({\n        type: ADD_ATTRIBUTE,\n        attribute: response.data,\n      });\n    }\n  };\n};\n\nexport const editAttributeAction = (attribute) => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await patchAttribute(attribute, token);\n    console.log(\"edit attribute ===\", response?.data);\n  };\n};\n\nexport const getUsersAction = () => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await fetchUsers(token);\n    if (response?.data) {\n      dispatch({\n        type: SET_USERS,\n        users: response.data,\n      });\n    }\n  };\n};\n\nexport const getVendorsAction = () => {\n  return async (dispatch) => {\n    const token = getAdminToken();\n    const response = await fetchVendors(token);\n    console.log(\"response ===\", response?.data);\n  };\n};\n\nexport const filterUsersAction = (searchValue, users) => {\n  if (!searchValue) {\n    return {\n      type: RESET_FILTERED_USERS,\n    };\n  }\n  const filteredUsers = users.filter(\n    ({ fName = \"\", lName = \"\", phone = \"\" }) => {\n      return (\n        fName.toLowerCase().startsWith(searchValue) ||\n        lName.toLowerCase().startsWith(searchValue) ||\n        `${phone}`.toLowerCase().startsWith(searchValue)\n      );\n    }\n  );\n  return {\n    type: SET_FILTERED_USERS,\n    users: filteredUsers,\n  };\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CreateNews_container__2bqbt\",\"body\":\"CreateNews_body__2-56y\",\"input__container\":\"CreateNews_input__container__RZXwo\",\"title__container\":\"CreateNews_title__container__11Ay8\",\"title\":\"CreateNews_title__Mh7mf\",\"images__container\":\"CreateNews_images__container__1PeJe\",\"image__container\":\"CreateNews_image__container__14BJ-\",\"image\":\"CreateNews_image__3Up9L\",\"delete__icon\":\"CreateNews_delete__icon__2PHzh\",\"label\":\"CreateNews_label__2HBAh\",\"submit__container\":\"CreateNews_submit__container__3kabs\"};","import React, { useRef } from \"react\";\nimport s from \"./CreateNews.module.css\";\nimport { connect } from \"react-redux\";\nimport Input from \"../../../../misc/Inputs/Input/Input\";\nimport Button from \"../../../../misc/Button/Button\";\nimport FixedWrapper from \"../../../../wrappers/FixedWrapper/FixedWrapper\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { Formik } from \"formik\";\nimport { createNewsAction } from \"../../../../store/actions/adminActions\";\n\nconst CreateNews = ({ createNews }) => {\n  const uploadInputRef = useRef();\n  const handleImages = ({ target: { files } }, values, setValues) => {\n    const reader = new FileReader();\n\n    reader.onload = ({ target: { result } }) => {\n      setValues({\n        ...values,\n        gallery: result,\n        galleryFile: files[0],\n      });\n    };\n    reader.readAsDataURL(files[0]);\n  };\n\n  return (\n    <div>\n      <div className={s.container}>\n        <div className={s.title__container}>\n          <h1 className={s.title}>Створення новини</h1>\n        </div>\n        <FixedWrapper>\n          <Formik\n            initialValues={{\n              title: \"\",\n              desc: \"\",\n              gallery: \"\",\n              galleryFile: {},\n            }}\n            onSubmit={async (\n              { title, desc, gallery, galleryFile },\n              { resetForm }\n            ) => {\n              const imageFormData = new FormData();\n              console.log(\"gallery ===\", gallery);\n\n              imageFormData.append(\"gallery\", galleryFile);\n              console.log(\"image ===\", imageFormData.get(\"gallery\"));\n\n              const isNewsCreated = await createNews(\n                { title, desc },\n                imageFormData\n              );\n              console.log(\"is news created ===\", isNewsCreated);\n\n              resetForm({ title: \"\", desc: \"\", gallery: \"\", galleryFile: {} });\n            }}\n          >\n            {({ values, handleChange, setValues, handleSubmit }) => (\n              <form className={s.body}>\n                <Input\n                  label=\"Назва\"\n                  value={values.title}\n                  name=\"title\"\n                  onChange={handleChange}\n                  containerClass={s.input__container}\n                />\n                <div className={s.input__container}>\n                  <p className={s.label}>Фото</p>\n                  <div className={s.images__container}>\n                    {values.gallery && (\n                      <div className={s.image__container}>\n                        <FontAwesomeIcon\n                          icon={faTimes}\n                          className={s.delete__icon}\n                          onClick={() => {\n                            uploadInputRef.current.value = null;\n                            setValues({ ...values, gallery: \"\" });\n                          }}\n                        />\n                        <img\n                          className={s.image}\n                          src={values.gallery}\n                          alt=\"loading\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                  <input\n                    type=\"file\"\n                    name=\"gallery\"\n                    ref={uploadInputRef}\n                    onChange={(e) => handleImages(e, values, setValues)}\n                  />\n                </div>\n                <Input\n                  label=\"Опис\"\n                  value={values.desc}\n                  name=\"desc\"\n                  onChange={handleChange}\n                  containerClass={s.input__container}\n                  isTextarea\n                />\n                <div className={s.submit__container}>\n                  <Button\n                    onClick={handleSubmit}\n                    type=\"submit\"\n                    title=\"Створити\"\n                    size=\"lg\"\n                  />\n                </div>\n              </form>\n            )}\n          </Formik>\n        </FixedWrapper>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {};\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    createNews: (news, gallery) => dispatch(createNewsAction(news, gallery)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNews);\n"],"sourceRoot":""}